从1.52.0.0版本开始，易达交易系统开始支持裸协议接口，投资者可以通过直接发送自组UDP报单的方式进行交易。


## 使用前准备


使用裸协议接口前，需要得到期货公司的批准，由期货公司管理员在易达系统中为投资者打开裸协议接口功能后才能正常使用裸协议报单。


由于裸协议报单只能通过UDP报送，因此需要向期货公司了解ydServer的UDP端口。以下是默认的易达端口，但是某些ydServer环境会根据期货公司内部策略进行修改。


<figure class="wp-block-table is-style-stripes">
    <table>
        <thead>
            <tr>
                <td>交易所</td>
                <td>TCP端口</td>
                <td>UDP端口</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>中金所</td>
                <td>50000</td>
                <td>50002</td>
            </tr>
            <tr>
                <td>上期所、能源所</td>
                <td>51000</td>
                <td>51002</td>
            </tr>
            <tr>
                <td>大商所</td>
                <td>52000</td>
                <td>52002</td>
            </tr>
            <tr>
                <td>郑商所</td>
                <td>53000</td>
                <td>53002</td>
            </tr>
        </tbody>
    </table>
</figure>


## 报单报文


<figure class="wp-block-table is-style-stripes">
    <table>
        <thead>
            <tr>
                <td>地址偏移</td>
                <td>长度(字节)</td>
                <td>字段类型</td>
                <td>注释</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>0</td>
                <td>16</td>
                <td>整数</td>
                <td>消息头。登录成功后，调用ydApi的成员函数getClientPacketHeader(YD_CLIENT_PACKET_INSERT_ORDER)获取，消息头在本次ydServer运行期间不变，ydServer重启后需要重新获取。</td>
            </tr>
            <tr>
                <td>16</td>
                <td>4</td>
                <td>整数（little-endian）</td>
                <td>合约序号。从YDInstrument的InstrumentRef中获取。</td>
            </tr>
            <tr>
                <td>20</td>
                <td>1</td>
                <td>整数</td>
                <td>买卖方向(0：买，1：卖）</td>
            </tr>
            <tr>
                <td>21</td>
                <td>1</td>
                <td>整数</td>
                <td>开平标志(0：开仓，1：平仓，3：平今，4：平昨)</td>
            </tr>
            <tr>
                <td>22</td>
                <td>1</td>
                <td>整数</td>
                <td>投保标志(1：投机，2：套利，3：套保)</td>
            </tr>
            <tr>
                <td>23</td>
                <td>1</td>
                <td>整数</td>
                <td>席位选择方法 (0：任意，1：指定，2：指定优先)</td>
            </tr>
            <tr>
                <td>24</td>
                <td>8</td>
                <td>IEEE 754双精度浮点类型（little-endian）</td>
                <td>价格</td>
            </tr>
            <tr>
                <td>32</td>
                <td>4</td>
                <td>整数（little-endian）</td>
                <td>报单数量</td>
            </tr>
            <tr>
                <td>36</td>
                <td>4</td>
                <td>整数（little-endian）</td>
                <td>报单引用</td>
            </tr>
            <tr>
                <td>40</td>
                <td>1</td>
                <td>整数</td>
                <td>报单类型(0：限价单，1：FAK, 2:市价单，3:FOK)</td>
            </tr>
            <tr>
                <td>41</td>
                <td>1</td>
                <td>整数</td>
                <td>填0</td>
            </tr>
            <tr>
                <td>42</td>
                <td>1</td>
                <td>整数</td>
                <td>席位连接编号</td>
            </tr>
            <tr>
                <td>43</td>
                <td>5</td>
                <td>整数</td>
                <td>填0</td>
            </tr>
        </tbody>
    </table>
</figure>


## 撤单报文


<figure class="wp-block-table is-style-stripes">
    <table>
        <thead>
            <tr>
                <td>地址偏移</td>
                <td>长度(字节)</td>
                <td>字段类型</td>
                <td>注释</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>0</td>
                <td>16</td>
                <td>整数</td>
                <td>消息头。登录成功后，调用ydApi的成员函数getClientPacketHeader(YD_CLIENT_PACKET_CANCEL_ORDER)获取，消息头在本次ydServer运行期间不变，ydServer重启后需要重新获取。</td>
            </tr>
            <tr>
                <td>16</td>
                <td>4</td>
                <td>整数（little-endian）</td>
                <td>欲撤单的系统报单号</td>
            </tr>
            <tr>
                <td>20</td>
                <td>1</td>
                <td>整数</td>
                <td>交易所序号。从YDExchange的ExchangeRef中获取。</td>
            </tr>
            <tr>
                <td>21</td>
                <td>1</td>
                <td>整数</td>
                <td>席位选择方法 (0：任意, 1：指定, 2：指定优先)</td>
            </tr>
            <tr>
                <td>22</td>
                <td>1</td>
                <td>整数</td>
                <td>席位连接序号</td>
            </tr>
            <tr>
                <td>23</td>
                <td>1</td>
                <td>整数</td>
                <td>填0</td>
            </tr>
        </tbody>
    </table>
</figure>




